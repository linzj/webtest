<head>
<meta charset='UTF-8'>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<script>
(function () {
  fetch('data.json', {cache: "no-cache"})
  .then((resolve) => {
    return resolve.json()
  })
  .then((resolve) => {
    data = resolve;
    if (window.methodCallback)
      window.methodCallback(data)
  })
})()

function button1click() {
  if (window.data)
    method_createElement(window.data);
  else
    window.methodCallback = method_createElement;
}

function button2click() {
  if (window.data)
    method_parse_html(window.data);
  else
    window.methodCallback = method_parse_html;
}

function button3click() {
  if (window.data)
    method_importNode(window.data);
  else
    window.methodCallback = method_importNode;
}

function button4click() {
  if (window.data)
    method_cloneNode(window.data);
  else
    window.methodCallback = method_cloneNode;
}
function button5click() {
  if (window.data)
    method_parse_html_using_class(window.data);
  else
    window.methodCallback = method_parse_html_using_class;
}

function button6click() {
  if (window.data)
    method_cloneNode_with_class(window.data);
  else
    window.methodCallback = method_cloneNode_with_class;
}

function resetclick() {
  var mydocument = document;
  var div = mydocument.getElementById('toshow');
  div.innerHTML = "";
}

function log(text) {
  var mydocument = document;
  var div = mydocument.getElementById('status');
  div.innerText = text;
}

function method_createElement(data) {
  var mydocument = document;
  var divContent = mydocument.getElementById('toshow');
  var div = mydocument.createElement('div');
  var style_table = data.style_table;
  var entries = data.entries;
  var max = entries.length;
  divContent.innerHTML = "";
  var t0 = performance.now();
  for (var i = 0; i < max; ++i) {
    let entry = entries[i];
    let text_node = mydocument.createElement('span');
    let style = text_node.style;
    let definedStyle = style_table[entry.color];
    text_node.innerText = entry.char;
    style.color = definedStyle.color;
    style.fontSize = definedStyle.size;
    div.appendChild(text_node);
  }
  divContent.appendChild(div);
  var t1 = performance.now();
  log('method_createElement used ' + (t1 - t0) + ' milliseconds');
}

function method_parse_html(data) {
  var mydocument = document;
  var divContent = mydocument.getElementById('toshow');
  var div = mydocument.createElement('div');
  var style_table = data.style_table;
  var entries = data.entries;
  var max = entries.length;
  divContent.innerHTML = "";
  var t0 = performance.now();
  var inner_html = ""
  for (var i = 0; i < max; ++i) {
    let entry = entries[i];
    let span = "<span ";
    let definedStyle = style_table[entry.color];
    span += 'style="color:' + definedStyle.color + ';font-size:' + definedStyle.size + ';">';
    span += entry.char + '</span>';
    inner_html += span
  }
  div.innerHTML = inner_html;
  divContent.appendChild(div);
  var t1 = performance.now();
  log('method_parse_html used ' + (t1 - t0) + ' milliseconds');
}

function method_importNode(data) {
  var mydocument = document;
  var divContent = mydocument.getElementById('toshow');
  var div = mydocument.createElement('div');
  var style_table = data.style_table;
  var entries = data.entries;
  var max = entries.length;
  var style_table_max = style_table.length;
  var i;
  divContent.innerHTML = "";
  var t0 = performance.now();
  var templates = [];
  for (i = 0; i < style_table_max; ++i) {
    var template = document.createElement('template');
    let text_node = mydocument.createElement('span');
    let style = text_node.style;
    let definedStyle = style_table[i];
    style.color = definedStyle.color;
    style.fontSize = definedStyle.size;
    template.content.appendChild(text_node);
    templates[i] = template;
  }
  for (i = 0; i < max; ++i) {
    let entry = entries[i];
    let template = templates[entry.color];
    let imported_node = mydocument.importNode(template, true);
    let text_node = imported_node.content.firstChild;
    text_node.innerText = entry.char;
    div.appendChild(text_node);
  }
  divContent.appendChild(div);
  var t1 = performance.now();
  log('method_importNode used ' + (t1 - t0) + ' milliseconds');
}

function method_cloneNode(data) {
  var mydocument = document;
  var divContent = mydocument.getElementById('toshow');
  var div = mydocument.createElement('div');
  var style_table = data.style_table;
  var entries = data.entries;
  var max = entries.length;
  var style_table_max = style_table.length;
  var i;
  divContent.innerHTML = "";
  var t0 = performance.now();
  var templates = [];
  for (i = 0; i < style_table_max; ++i) {
    var template = mydocument.createElement('span');
    let style = template.style;
    let definedStyle = style_table[i];
    style.color = definedStyle.color;
    style.fontSize = definedStyle.size;
    templates[i] = template;
  }
  for (i = 0; i < max; ++i) {
    let entry = entries[i];
    let template = templates[entry.color];
    let text_node = template.cloneNode();
    text_node.innerText = entry.char;
    div.appendChild(text_node);
  }
  divContent.appendChild(div);
  var t1 = performance.now();
  log('method_cloneNode used ' + (t1 - t0) + ' milliseconds');
}
function method_parse_html_using_class(data) {
  var mydocument = document;
  var divContent = mydocument.getElementById('toshow');
  var div = mydocument.createElement('div');
  var style_table = data.style_table;
  var entries = data.entries;
  var max = entries.length;
  divContent.innerHTML = "";
  var style_table_max = style_table.length;
  var i;
  var t0 = performance.now();
  var styleElement = mydocument.getElementById("myartifactStyle");
  if (styleElement) {
    mydocument.head.removeChild(styleElement);
  }
  styleElement = mydocument.createElement('style');
  styleElement.setAttribute("id", "myartifactStyle");
  mydocument.head.appendChild(styleElement);
  var sheet = styleElement.sheet;

  for (i = 0; i < style_table_max; ++i) {
    let definedStyle = style_table[i];
    sheet.insertRule('.span_class' + i  + '{ color: ' + definedStyle.color + ';font-size:' + definedStyle.size + ';}');
  }
  var inner_html = ""
  for (var i = 0; i < max; ++i) {
    let entry = entries[i];
    let span = "<span ";
    span += 'class="span_class' + entry.color  + '">';
    span += entry.char + '</span>';
    inner_html += span;
  }
  div.innerHTML = inner_html;
  divContent.appendChild(div);
  var t1 = performance.now();
  log('method_parse_html_using_class used ' + (t1 - t0) + ' milliseconds');
}

function method_cloneNode_with_class(data) {
  var mydocument = document;
  var divContent = mydocument.getElementById('toshow');
  var div = mydocument.createElement('div');
  var style_table = data.style_table;
  var entries = data.entries;
  var max = entries.length;
  var style_table_max = style_table.length;
  var i;
  divContent.innerHTML = "";
  var t0 = performance.now();
  var styleElement = mydocument.getElementById("myartifactStyle");
  if (styleElement) {
    mydocument.head.removeChild(styleElement);
  }
  styleElement = mydocument.createElement('style');
  styleElement.setAttribute("id", "myartifactStyle");
  mydocument.head.appendChild(styleElement);
  var sheet = styleElement.sheet;

  var templates = [];
  for (i = 0; i < style_table_max; ++i) {
    var template = mydocument.createElement('span');
    let definedStyle = style_table[i];
    let style_class = 'span_class' + i;
    sheet.insertRule('.' + style_class + '{ color: ' + definedStyle.color + ';font-size:' + definedStyle.size + ';}');
    template.classList.add(style_class);
    // template.setAttribute('class', style_class);
    templates[i] = template;
  }
  for (i = 0; i < max; ++i) {
    let entry = entries[i];
    let template = templates[entry.color];
    let text_node = template.cloneNode();
    text_node.innerText = entry.char;
    div.appendChild(text_node);
  }
  divContent.appendChild(div);
  var t1 = performance.now();
  log('method_cloneNode used ' + (t1 - t0) + ' milliseconds');
}
</script>
</head>
<body>
<button onclick="button1click()">Method createElement</button>
<button onclick="button2click()">Method parse html</button>
<button onclick="button3click()">Method importNode</button>
<button onclick="button4click()">Method cloneNode</button>
<button onclick="button5click()">Method parse html using class</button>
<button onclick="button6click()">Method cloneNode using class</button>
<button onclick="resetclick()">Reset</button>
<div id="status"></div>
<div id="toshow">
</div>
</body>
