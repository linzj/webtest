<body>
<script>
function log(msg) {
  let e = document.createElement('div');
  e.innerText = msg;
  document.body.appendChild(e);
}

function gc() {
    for (let i = 0; i < 20000; i++)
        new ArrayBuffer(0x1000);
}

function assertTrue(exp) {
  if (!exp) {
    log('assert failed');
  } else {
    log('assert passed');
  }
}
var a, b;  // Global variables that will end up with number map.

for (var i = 0; i < 100000; i++) {
  b = 1;
  a = i + -0;  // -0 is a number, so this will make "a" a heap object.
  b = a;
}

assertTrue(a === b);
gc();
assertTrue(a === b);
</script>
</body>
