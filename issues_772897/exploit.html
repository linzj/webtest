<body>
<script>
function log(msg) {
  let e = document.createElement('div');
  e.innerText = msg;
  document.body.appendChild(e);
}
function assertThrows(f, expected_exception) {
  try {
    f();
  } catch (e) {
    log('thrown ' + e + '; expecting throw ' + expected_exception);
    return;
  }
  log('not expected');
}
// Copyright 2017 the V8 project authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

function store(obj, name) {
  return obj[name] = 0;
}

function f(obj) {
  var key = {
    toString() { throw new Error("boom"); }
  };
  store(obj, key);
}

(function() {
  var proxy = new Proxy({}, {});
  store(proxy, 0)
  assertThrows(() => f(proxy), Error);
})();
</script>
</body>
