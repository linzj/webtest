<body>
<script>
function log(msg) {
  let e = document.createElement('div');
  e.innerText = msg;
  document.body.appendChild(e);
}
const a = /x/;
function logEquals(a, b) {
  log('1: ' + a.toString() + ';2: ' + b.toString());
}

function assertFalse(a) {
  if (!a) {
    log('expected');
    return;
  }
  log('not expected');
}
let called_custom_unicode_getter = false;
const re = /./;

function f() {
  re.__defineGetter__("unicode", function() {
    called_custom_unicode_getter = true;
  });
  return 2;
}

logEquals(["","",], re[Symbol.split]("abc", { valueOf: f }));

// The spec mandates retrieving the regexp instance's flags before
// ToUint(limit), i.e. the unicode getter must still be unmodified when
// flags are retrieved.
assertFalse(called_custom_unicode_getter);
</script>
</body>
